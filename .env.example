# Sergas Super Account Manager - Environment Variables Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ===================================
# Environment
# ===================================
ENV=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO

# ===================================
# Claude Configuration
# ===================================
# IMPORTANT: DO NOT set ANTHROPIC_API_KEY or ANTHROPIC_BASE_URL
# Claude Code uses your subscription authentication when these are not set
# Uncomment the lines below ONLY if you want to use GLM-4.6 instead of Claude

# GLM-4.6 Configuration via Z.ai (Anthropic-Compatible API)
# ANTHROPIC_BASE_URL=https://api.z.ai/api/anthropic
# ANTHROPIC_API_KEY=6845ef1767204ea98a67faaecb3afe08.fyZ4DweXVe3SvCXS
# CLAUDE_MODEL=glm-4.6

# ===================================
# ACTIVE CONFIGURATION: GLM-4.6 via Z.ai for BOTH Claude Code & App
# ===================================
# Claude Code Configuration (uses AUTH_TOKEN, not API_KEY)
ANTHROPIC_AUTH_TOKEN=your-zai-auth-token
ANTHROPIC_BASE_URL=https://api.z.ai/api/anthropic
ANTHROPIC_DEFAULT_SONNET_MODEL=glm-4.6
ANTHROPIC_DEFAULT_HAIKU_MODEL=glm-4.5-air
ANTHROPIC_DEFAULT_OPUS_MODEL=glm-4.6

# Application Configuration (Python SDK uses API_KEY)
# Note: Both Claude Code and your app can now use GLM-4.6
ANTHROPIC_API_KEY=your-zai-api-key
CLAUDE_MODEL=glm-4.6

# ===================================
# TO SWITCH TO MAX SUBSCRIPTION INSTEAD:
# ===================================
# Comment out all ANTHROPIC_* variables above
# Claude Code will then use your Max subscription OAuth
# See: docs/FILE_SEPARATION_STRATEGY.md for details

# ===================================
# Zoho CRM - MCP Integration (Tier 1)
# ===================================
ZOHO_MCP_ENDPOINT=https://zoho-mcp2-900114980.zohomcp.com/your-endpoint
ZOHO_MCP_CLIENT_ID=your-mcp-client-id
ZOHO_MCP_CLIENT_SECRET=your-mcp-client-secret

# ===================================
# Zoho CRM - Python SDK Integration (Tier 2)
# ===================================
ZOHO_SDK_CLIENT_ID=your-sdk-client-id
ZOHO_SDK_CLIENT_SECRET=your-sdk-client-secret
ZOHO_SDK_REFRESH_TOKEN=your-refresh-token
ZOHO_SDK_REDIRECT_URL=http://localhost:8000/oauth/callback
ZOHO_SDK_REGION=us  # us, eu, au, in, cn, jp
ZOHO_SDK_ENVIRONMENT=production  # production, sandbox, developer

# ===================================
# Zoho CRM - REST API Integration (Tier 3 - Fallback)
# ===================================
ZOHO_REST_API_DOMAIN=https://www.zohoapis.com
ZOHO_REST_ACCESS_TOKEN=your-rest-access-token
ZOHO_REST_REFRESH_TOKEN=your-rest-refresh-token
ZOHO_REST_CLIENT_ID=your-rest-client-id
ZOHO_REST_CLIENT_SECRET=your-rest-client-secret

# ===================================
# Cognee Memory
# ===================================
COGNEE_API_KEY=your-cognee-api-key
COGNEE_BASE_URL=http://localhost:8000  # or your Cognee deployment
COGNEE_WORKSPACE=sergas-accounts

# ===================================
# Database Configuration
# ===================================
# Choose ONE database option:

# Option A: SQLite (Development/Testing)
# - Fastest setup, no external services needed
# - Suitable for development and single-user testing
# - Limited webhook concurrency (sequential processing)
# DATABASE_URL=sqlite:///./data/sergas_agent.db

# Option B: PostgreSQL (Production/Multi-User)
# - Full webhook concurrency support
# - Better performance at scale
# - Required for production deployments
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=sergas_agent_db
DATABASE_USER=sergas_user
DATABASE_PASSWORD=your-secure-password-here

# Token persistence table
TOKEN_PERSISTENCE_ENABLED=true

# ===================================
# Redis Cache
# ===================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_SSL=false

# ===================================
# AWS Secrets Manager
# ===================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
SECRETS_MANAGER_ENABLED=false  # Enable in production

# ===================================
# Monitoring & Observability
# ===================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
ENABLE_METRICS=true
ENABLE_TRACING=false

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=sergas-super-account-manager

# ===================================
# Security
# ===================================
SECRET_KEY=your-super-secret-key-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ===================================
# Application Settings
# ===================================
API_PORT=8008
MAX_CONCURRENT_ACCOUNTS=10
ACCOUNT_REVIEW_CADENCE=daily  # daily, weekly
APPROVAL_TIMEOUT_HOURS=72

# ===================================
# Integration Manager Configuration
# ===================================
ENABLE_TIER1_MCP=true
ENABLE_TIER2_SDK=true
ENABLE_TIER3_REST=true
ENABLE_FAILOVER=true

# ===================================
# Circuit Breaker Settings
# ===================================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_HALF_OPEN_CALLS=3
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# ===================================
# Retry Policy
# ===================================
MAX_RETRY_ATTEMPTS=3
RETRY_BASE_DELAY=1.0
RETRY_MAX_DELAY=60.0
RETRY_EXPONENTIAL_BASE=2.0
RETRY_JITTER_ENABLED=true

# ===================================
# Health Monitoring
# ===================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# ===================================
# Feature Flags
# ===================================
ENABLE_ZOHO_MCP=true
ENABLE_ZOHO_SDK=true
ENABLE_COGNEE_MEMORY=true
ENABLE_HUMAN_APPROVAL=true
ENABLE_AUDIT_LOGGING=true

# ===================================
# Webhook Sync Configuration
# ===================================
WEBHOOK_ENABLED=true
WEBHOOK_SECRET=generate-with-secrets.token_hex-32
WEBHOOK_BASE_URL=https://your-domain.com
WEBHOOK_EVENT_TTL=3600  # Deduplication TTL in seconds
WEBHOOK_MAX_QUEUE_SIZE=10000
WEBHOOK_BATCH_SIZE=10
WEBHOOK_BATCH_TIMEOUT=5  # Seconds
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_BASE=2  # Exponential backoff base
WEBHOOK_NUM_WORKERS=3

# ===================================
# Development Tools
# ===================================
ENABLE_DEBUG_TOOLBAR=true
ENABLE_SWAGGER_UI=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8000


# ===================================
# Frontend (Next.js) & CopilotKit
# ===================================
FRONTEND_BASE_URL=http://localhost:3000
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000
NEXT_PUBLIC_SSE_ENDPOINT=/api/copilotkit/stream
NEXT_PUBLIC_WS_ENDPOINT=
NEXT_PUBLIC_ENABLE_COPILOTKIT=true
NEXT_PUBLIC_CLAUDE_MODEL=${CLAUDE_MODEL}

# ===================================
# CopilotKit Backend Integration
# ===================================
COPILOTKIT_ENABLED=true
COPILOTKIT_ROUTE=/api/copilotkit
COPILOTKIT_MAX_TOKENS=2048
COPILOTKIT_TEMPERATURE=0.2
